@import "tailwindcss";

/* -------------------------------------------------------------------------- */
/* 1. CSS Variables for Theming (Glassmorphism) */
/* -------------------------------------------------------------------------- */
:root {
    --color-primary-rgb: 214, 0, 0;
    /* Indigo-600 */
    --color-primary: rgb(var(--color-primary-rgb));

    /* Glassmorphism Core */
    --glass-bg: rgba(255, 255, 255, 0.25);
    /* More opaque for 'proper white' feel */
    --glass-border: rgba(255, 255, 255, 0.4);
    --glass-blur: 20px;
    --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);

    /* Text Colors - Pure Black for "Only Black" feel */
    --color-text-main-rgb: 0, 0, 0;
    /* Pure Black */
    --color-text-secondary-rgb: 30, 30, 30;
    /* Very Dark Gray */
    --color-hover-bg-rgb: 255, 255, 255;
    /* white */
    --color-hover-opacity: 0.4;

    /* Status */
    --color-liked-rgb: 239, 68, 68;
    /* red-500 */

    /* Global Background Gradients (Fixed in background) */
    /* Shades of Red as requested */
    --bg-gradient-1: #ef4444;
    /* Red 500 */
    --bg-gradient-2: #f87171;
    /* Red 400 */
    --bg-gradient-3: #b91c1c;
    /* Red 700 */
    --bg-gradient-4: #fee2e2;
    /* Red 100 */
}

/* -------------------------------------------------------------------------- */
/* 2. Dark Mode Overrides */
/* -------------------------------------------------------------------------- */
[data-theme="dark"] {
    /* Glassmorphism Dark Core */
    --glass-bg: rgba(0, 0, 0, 0.3);
    --glass-border: rgba(255, 255, 255, 0.08);
    /* More subtle in dark mode */
    --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);

    --color-text-main-rgb: 243, 244, 246;
    /* gray-100 */
    --color-text-secondary-rgb: 209, 213, 219;
    /* gray-300 */
    --color-hover-bg-rgb: 255, 255, 255;
    --color-hover-opacity: 0.1;

    --color-liked-rgb: 252, 165, 165;
    /* red-300 */

    /* Dark Mode Gradients */
    --bg-gradient-1: #2d3436;
    --bg-gradient-2: #000000;
    --bg-gradient-3: #434343;
    --bg-gradient-4: #000000;
}

/* -------------------------------------------------------------------------- */
/* 3. Base Styles & Background */
/* -------------------------------------------------------------------------- */
body {
    background:
        radial-gradient(circle at 10% 20%, var(--bg-gradient-1) 0%, transparent 50%),
        radial-gradient(circle at 90% 10%, var(--bg-gradient-3) 0%, transparent 50%),
        radial-gradient(circle at 50% 90%, var(--bg-gradient-4) 0%, transparent 50%),
        linear-gradient(135deg, var(--bg-gradient-2) 0%, var(--bg-gradient-3) 100%);
    background-attachment: fixed;
    background-size: 200% 200%;
    animation: gradientMove 15s ease infinite;
    min-height: 100vh;
    color: rgb(var(--color-text-main-rgb));
    transition: color 0.3s ease;
}

@keyframes gradientMove {
    0% {
        background-position: 0% 50%;
    }

    50% {
        background-position: 100% 50%;
    }

    100% {
        background-position: 0% 50%;
    }
}

/* -------------------------------------------------------------------------- */
/* 4. Glass Utilities */
/* -------------------------------------------------------------------------- */

/* The main glass panel class to replace cards */
.glass-panel {
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow);
    border-radius: 16px;
    /* Soft rounding */
    color: rgb(var(--color-text-main-rgb));
}

/* For inputs */
.glass-input {
    background: rgba(255, 255, 255, 0.1);
    /* Even clearer */
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(4px);
    color: rgb(var(--color-text-main-rgb));
    transition: all 0.3s ease;
}

.glass-input:focus {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(var(--color-primary-rgb), 0.5);
    box-shadow: 0 0 15px rgba(var(--color-primary-rgb), 0.2);
    outline: none;
}

/* For buttons */
.glass-button {
    background: rgba(var(--color-primary-rgb), 0.8);
    backdrop-filter: blur(4px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    box-shadow: 0 4px 15px rgba(var(--color-primary-rgb), 0.3);
    transition: all 0.3s ease;
}

.glass-button:hover {
    background: rgba(var(--color-primary-rgb), 0.95);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(var(--color-primary-rgb), 0.4);
}

.glass-button-secondary {
    background: transparent;
    border: 1px solid var(--glass-border);
    color: rgb(var(--color-text-main-rgb));
    transition: all 0.2s ease;
}

.glass-button-secondary:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: var(--color-primary);
}

/* -------------------------------------------------------------------------- */
/* 5. Legacy Class Mapping (Adapters) */
/* -------------------------------------------------------------------------- */
/* These classes map the old semantic names to the new glass look */

.bg-surface {
    /* Originally white card bg -> Now Glass Panel */
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow);
}

.bg-bg {
    /* Originally gray page bg -> Transparent to show global gradient */
    background-color: transparent !important;
}

.border-app {
    border-color: var(--glass-border) !important;
}

.bg-hover-bg {
    background-color: rgba(var(--color-hover-bg-rgb), var(--color-hover-opacity));
}

.bg-placeholder-bg {
    background-color: rgba(0, 0, 0, 0.05);
    /* Subtle dim for skeletons */
}

/* Text adjustments */
.text-main {
    color: rgb(var(--color-text-main-rgb));
}

.text-secondary {
    color: rgb(var(--color-text-secondary-rgb));
}

.text-primary {
    color: var(--color-primary);
}

.bg-primary {
    background-color: var(--color-primary);
}

.border-primary {
    border-color: var(--color-primary);
}

.fill-primary {
    fill: var(--color-primary);
}

.liked-active {
    color: rgb(var(--color-liked-rgb)) !important;
    fill: rgb(var(--color-liked-rgb)) !important;
    filter: drop-shadow(0 0 8px rgba(var(--color-liked-rgb), 0.5));
    /* Glowing heart */
}

/* -------------------------------------------------------------------------- */
/* 6. Animations & Modals */
/* -------------------------------------------------------------------------- */

/* Modal Backdrop - Frosted */
.modal-backdrop {
    display: none;
    position: fixed;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.3);
    /* Darker dim */
    backdrop-filter: blur(8px);
    /* Blur the content behind modal */
    z-index: 50;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    overflow-y: auto;
}

.modal-backdrop.active {
    display: flex;
}

.modal-container {
    background: var(--glass-bg);
    /* Ensure modal itself is glass */
    backdrop-filter: blur(20px) saturate(180%);
    /* Stronger blur for modal */
    border: 1px solid var(--glass-border);
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
    border-radius: 24px;
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease;
    transform: scale(0.95);
    opacity: 0;
}

.modal-backdrop.active .modal-container {
    transform: scale(1);
    opacity: 1;
}

/* Mobile Slide-up Override */
@media (max-width: 767px) {
    #createPostModal.modal-backdrop.active .modal-container {
        transform: translateY(100%);
        opacity: 0;
    }

    #createPostModal.modal-backdrop.active.mobile-launch .modal-container {
        transform: translateY(0);
        opacity: 1;
        border-radius: 24px 24px 0 0;
        /* Sheet look */
    }
}

/* Toast Animations */
@keyframes toastSlideIn {
    0% {
        transform: translateX(120%) scale(0.8);
        opacity: 0;
    }

    100% {
        transform: translateX(0) scale(1);
        opacity: 1;
    }
}

@keyframes toastSlideOut {
    0% {
        transform: translateX(0) scale(1);
        opacity: 1;
    }

    100% {
        transform: translateX(120%) scale(0.8);
        opacity: 0;
    }
}

.toast-container .toast {
    /* Glass toasts */
    background: rgba(255, 255, 255, 0.7) !important;
    /* Lighter for readability */
    backdrop-filter: blur(12px) !important;
    border: 1px solid rgba(255, 255, 255, 0.5) !important;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1) !important;
    color: #333 !important;
    border-radius: 12px !important;
}

[data-theme="dark"] .toast-container .toast {
    background: rgba(30, 30, 30, 0.8) !important;
    color: #fff !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
}

/* Global Transitions */
/* Optimized: targeted transitions instead of wildcard */
body,
a,
button,
input,
textarea,
.glass-panel,
.glass-button,
.glass-input {
    transition-property: background-color, border-color, color, fill, opacity, box-shadow, transform, backdrop-filter;
    transition-duration: 200ms;
    transition-timing-function: ease-out;
}

/* Scrollbar Polish */
::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: rgba(156, 163, 175, 0.5);
    /* gray-400/50 */
    border-radius: 999px;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(107, 114, 128, 0.8);
    /* gray-500/80 */
}
